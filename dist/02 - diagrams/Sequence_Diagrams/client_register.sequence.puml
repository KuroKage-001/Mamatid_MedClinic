@startuml Client Registration System

actor Client
participant Browser
participant "client_register.php" as PHP
database Database

' Initial Page Load
Client -> Browser: Access registration page
Browser -> PHP: GET request
PHP --> Browser: Display registration form

' Registration Process
Client -> Browser: Submit registration form\n(name, email, password, confirm_password,\nphone, address, dob, gender)
Browser -> PHP: POST form data

' Validation Steps
PHP -> PHP: Validate passwords match
alt Passwords Don't Match
    PHP --> Browser: Show error toast\n"Passwords do not match"
    Browser --> Client: Display error message
else Passwords Match
    PHP -> Database: Check if email exists
    Database --> PHP: Return email count
    
    alt Email Exists
        PHP --> Browser: Show error toast\n"Email already exists"
        Browser --> Client: Display error message
    else Email Available
        PHP -> PHP: Encrypt password (MD5)
        PHP -> Database: BEGIN Transaction
        PHP -> Database: INSERT client data
        
        alt Registration Success
            Database --> PHP: Confirm insertion
            PHP -> Database: COMMIT Transaction
            PHP --> Browser: Show success alert
            Browser --> Client: Display success message\nand redirect to login
        else Registration Failed
            Database --> PHP: Error
            PHP -> Database: ROLLBACK Transaction
            PHP --> Browser: Show error toast
            Browser --> Client: Display error message
        end
    end
end

' Login Option
Client -> Browser: Click "I already have an account"
Browser --> Client: Redirect to login page

@enduml 