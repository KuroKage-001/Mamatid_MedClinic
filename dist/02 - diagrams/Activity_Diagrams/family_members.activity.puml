@startuml Family Members Activity
skinparam monochrome true
skinparam shadowing false
skinparam ActivityBackgroundColor white
skinparam ActivityBorderColor black
skinparam ArrowColor black
skinparam NoteBackgroundColor white
skinparam NoteBorderColor black

|Healthcare Staff|
|System|

start

partition "Family Member Management" {
  |Healthcare Staff|
  :Access Family Members;
  
  if (Action?) is (Add) then
    :Display Member Form;
    :Enter Member Details;
    note right
      Required:
      - Serial Number
      - Member Name
      - Registration Date
    end note
    
    :Submit Form;
    
    |System|
    :Validate Form;
    
    if (Valid?) then (yes)
      :Format Data;
      note right
        - Capitalize name
        - Format date
      end note
      
      :Begin Transaction;
      :Save Record;
      
      if (Save Success?) then (yes)
        :Commit Transaction;
        :Show Success Toast;
        :Refresh List;
      else (no)
        :Rollback & Log Error;
        :Show Error Message;
      endif
      
    else (no)
      :Show Validation Error;
    endif
    
  elseif (Action?) is (Delete)
    :Click Delete;
    
    |System|
    :Verify ID;
    
    if (Valid ID?) then (yes)
      :Begin Transaction;
      :Check Record;
      
      if (Found?) then (yes)
        :Delete Record;
        
        if (Success?) then (yes)
          :Commit Transaction;
          :Show Success Toast;
          :Refresh List;
        else (no)
          :Rollback & Log Error;
          :Show Error Message;
        endif
        
      else (no)
        :Show Not Found Error;
      endif
      
    else (no)
      :Show Invalid Request;
    endif
    
  elseif (Action?) is (Edit)
    :Click Edit;
    :Go to Update Page;
    
  else (View)
    |System|
    :Load Members;
    :Display Table;
    note right
      Features:
      - Search & Sort
      - Export Options
      - Column Toggle
    end note
  endif
}

stop

@enduml 