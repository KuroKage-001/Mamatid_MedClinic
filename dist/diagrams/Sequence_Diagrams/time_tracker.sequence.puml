@startuml Time Tracker System

actor User
participant Browser
participant "time_tracker.php" as PHP
database Database

' Initial Page Load
User -> Browser: Access time tracker
Browser -> PHP: GET request
PHP -> Database: Check today's log
Database --> PHP: Return log status
PHP --> Browser: Display time buttons\n(enabled/disabled based on status)

' Time In Process
User -> Browser: Click Time In
Browser -> PHP: POST time_in action
PHP -> Database: BEGIN Transaction
PHP -> Database: INSERT time_in record
alt Success
    Database --> PHP: Confirm insertion
    PHP -> Database: COMMIT Transaction
    PHP --> Browser: Show success message\nDisable Time In button
else Error
    Database --> PHP: Error
    PHP -> Database: ROLLBACK Transaction
    PHP --> Browser: Show error message
end

' Time Out Process
User -> Browser: Click Time Out
Browser -> PHP: POST time_out action
PHP -> Database: BEGIN Transaction
PHP -> Database: INSERT time_out record
alt Success
    Database --> PHP: Confirm insertion
    PHP -> Database: COMMIT Transaction
    PHP --> Browser: Show success message\nDisable Time Out button
else Error
    Database --> PHP: Error
    PHP -> Database: ROLLBACK Transaction
    PHP --> Browser: Show error message
end

' View Time Logs
User -> Browser: View time logs
Browser -> PHP: Request logs
PHP -> Database: SELECT user's time logs
Database --> PHP: Return time logs
PHP --> Browser: Display logs table

note right of Browser
  Time Tracking Rules:
  - Can only Time In once per day
  - Must Time In before Time Out
  - Auto-calculates total hours
  - Real-time clock display
end note

@enduml 