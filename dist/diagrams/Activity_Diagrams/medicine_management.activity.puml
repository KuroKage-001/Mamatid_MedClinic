@startuml Medicine Management Activity
skinparam monochrome true
skinparam shadowing false
skinparam ActivityBackgroundColor white
skinparam ActivityBorderColor black
skinparam ArrowColor black
skinparam NoteBackgroundColor white
skinparam NoteBorderColor black

|Healthcare Staff|
|System|

start

partition "Medicine Management" {
  |Healthcare Staff|
  :Access Medicines Page;
  
  if (Action?) then (Add)
    :Enter Medicine Name;
    note right: Format: Trim spaces\nCapitalize words
    
    |System|
    :Check Name Availability;
    
    if (Name Available?) then (yes)
      :Enable Save Button;
      |Healthcare Staff|
      :Click Save;
      
      |System|
      if (Name Not Empty?) then (yes)
        :Begin Transaction;
        if (Save Success?) then (yes)
          :Commit Transaction;
          :Show Success Toast;
          note right: Auto-dismiss (3s)
        else (no)
          :Rollback & Log Error;
          :Show Error Message;
        endif
      else (no)
        :Show Empty Form Error;
      endif
    else (no)
      :Disable Save Button;
      :Show "Name Taken" Toast;
    endif
    
  else (View)
    |System|
    :Display Medicine List;
    note right: Search & Sort\nResponsive view
    
    |Healthcare Staff|
    :Interact with List;
    
    fork
      :Select Export;
      note right: Copy/CSV/Excel\nPDF/Print
      |System|
      :Generate Export;
    fork again
      :Click Edit;
      |System|
      :Go to Update Page;
    fork again
      :Use Search/Filter;
      |System|
      :Update View;
    end fork
  endif
}

stop
@enduml 